<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
		<title>猫塘-关于猫咪的一切</title>
		<link rel="shortcut icon" href="favicon/tamiao.ico" />
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		
			<link rel="stylesheet" type="text/css" href="css/pcStyle.css">
		<link rel="stylesheet" type="text/css" href="css/mobileStyle.css"/>
	
		<script type="text/javascript" src="js/rem.js">
			
		</script>
		
		<style type="text/css">
			
		</style>
	</head>

	<body>
		<header id="head">
			<div class="container-header">
				<div class="container">
					<div class="logo-box">
						<a href="javascript:void(0);"><img class="logo" src="images/cat.png" title="猫塘.logo"></a>
					</div>
					<div class="main-search">
						<input class="search" type="" name="" id="" value="" placeholder="搜索感兴趣的内容" />
						<input class="searchBtn" type="button" value="搜 索">
					</div>
					<div class="login-area">
						<a href="javascript:void(0);">登陆</a>
						<div class="v-line"></div><a href="javascript:void(0);">注册</a>
					</div>
					
				</div>
				<div class="container-btm">

				</div>
			</div>
		</header>
		<article id="body">
			<div id="img-box">
				
			</div>
			<div class="clear">
				
			</div>
		</article>
		<footer id="footer">
			<div class="about">
				
					<a href="javascript:void(0);">关于猫塘</a>|					
					<a href="javascript:void(0);">联系猫塘</a>|
					<a href="javascript:void(0);">和猫塘合作</a>
				
			</div>
			
		</footer>
		
		<div id="right-sideBar">
			<div class="mobile-search">
				
			</div>
			<div class="b2top">
				<a href="javascript:void(0);">TOP</a>
			</div>
		</div>
		
	</body>
	<script type="text/javascript">
		var img_box = document.getElementById("img-box");
		var boxList = img_box.children;
		console.log(boxList[0])
		
		
		function waterfall(){
			var xhr = new XMLHttpRequest();
			xhr.open('get','files/imgstore.json',false);
			xhr.onreadystatechange = function(){
				if(xhr.readyState ==4 && xhr.status ==200){
					var imgList = eval(xhr.responseText)
					callback(imgList);
				}
			}
			xhr.send(null);
		}
		
		
		function callback(imgList){
			
				for(j=0;j<imgList.length;j++){
					var img = document.createElement('img');
					img.src="files/img/"+imgList[j];
					if(j<boxList.length){
						boxList[j].appendChild(img);
						
						
						
					}else{
						
//							var harr=[];
//							for(var i=0;i<boxList.length;i++){
//								console.log(boxList[i].offsetHeight)
//								
//								harr[i] = boxList[i].offsetHeight
//								
//								
//							}
//							var minHeight =Math.min.apply(null,harr)
//							console.info(minHeight)//拿到最低的box
//							console.info(harr.indexOf(minHeight))//拿到最低box的index;
//							var boxIndex = harr.indexOf(minHeight);
//							boxList[boxIndex].appendChild(img);
							switch(j%4){
								case 0:
									boxList[0].appendChild(img);
									break;
								case 1:
									boxList[1].appendChild(img);
									break;
								case 2:
									boxList[2].appendChild(img);
									break;
								case 3:
									boxList[3].appendChild(img);
							}
								
						
					}
				}
			
		}
		
		waterfall();
		waterfall();
		waterfall();
		waterfall();
		
		
	</script>
</html>